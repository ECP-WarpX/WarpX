spack:
# CUDA
  definitions:
  - cuda: []
  - cuda: [cuda, blaspp +cuda]
    when: env.get("SPACK_STACK_USE_CUDA", "") == "1"

# basic Python dependencies for WarpX Python PICMI bindings
  - python: []
  - python: [python, py-pip]
    when: env.get("SPACK_STACK_USE_PYTHON", "") == "1"
  specs:
  - ncurses+symlinks
  - adios2
  - blaspp
  - ccache
  - cmake
  - fftw
  - hdf5
  - lapackpp
  - mpi
  - openpmd-api
  - pkgconfig
  - $cuda
  - $python

  packages:
    all:
      target: [broadwell]
      compiler: [gcc@9.2.0]
      variants: ~fortran
      providers:
        mpi: [openmpi]
    cmake:
      externals:
      - spec: "cmake"
        prefix: /cvmfs/sft.cern.ch/lcg/releases/CMake/3.20.0-790a8/x86_64-centos7-gcc11-opt/
      buildable: False
    openmpi:
      externals:
      - spec: "openmpi"
        prefix: /cvmfs/sft.cern.ch/lcg/releases/openmpi/3.1.0-37032/x86_64-centos7-gcc11-opt/
      buildable: False
    cuda:
      externals:
      - spec: "cuda"
        prefix: /cvmfs/sft.cern.ch/lcg/releases/cuda/11.4-166ec/x86_64-centos7-gcc11-opt/
      buildable: False
  compilers:
  - compiler:
      environment: {}
      extra_rpaths: []
      spec: gcc@9.2.0
      paths:
        cc: /cvmfs/sft.cern.ch/lcg/releases/gcc/11.1.0-e80bf/x86_64-centos7/bin/gcc
        cxx: /cvmfs/sft.cern.ch/lcg/releases/gcc/11.1.0-e80bf/x86_64-centos7/bin/g++
        f77: /cvmfs/sft.cern.ch/lcg/releases/gcc/11.1.0-e80bf/x86_64-centos7/bin/gfortran
        fc: /cvmfs/sft.cern.ch/lcg/releases/gcc/11.1.0-e80bf/x86_64-centos7/bin/gfortran
      flags: {}
      operating_system: centos7
      target: x86_64
      modules: []
  config:
    build_jobs: 6
