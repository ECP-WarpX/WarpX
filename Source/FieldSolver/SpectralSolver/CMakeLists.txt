foreach(D IN LISTS WarpX_DIMS)
    warpx_set_suffix_dims(SD ${D})
    target_sources(WarpX_${SD}
      PRIVATE
        SpectralFieldData.cpp
        SpectralKSpace.cpp
        SpectralSolver.cpp
    )

    if(WarpX_COMPUTE STREQUAL CUDA)
        target_sources(ablastr_${SD} PRIVATE WrapCuFFT.cpp)
    elseif(WarpX_COMPUTE STREQUAL HIP)
        target_sources(ablastr_${SD} PRIVATE WrapRocFFT.cpp)
    else()
        target_sources(ablastr_${SD} PRIVATE WrapFFTW.cpp)
    endif()

    if(D STREQUAL "RZ")
        target_sources(WarpX_${SD}
          PRIVATE
            SpectralSolverRZ.cpp
            SpectralFieldDataRZ.cpp
            SpectralKSpaceRZ.cpp
            SpectralBinomialFilter.cpp
        )
    endif()
endforeach()

if(RZ IN_LIST WarpX_DIMS)
    add_subdirectory(SpectralHankelTransform)
endif()
add_subdirectory(SpectralAlgorithms)
