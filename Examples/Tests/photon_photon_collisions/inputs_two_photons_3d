#################################
####### GENERAL PARAMETERS ######
#################################
max_step = 100
amr.n_cell = 16 16 16
amr.max_grid_size = 16
amr.blocking_factor = 4
amr.max_level = 0
geometry.dims = 3
geometry.prob_lo = -1e-6 -1e-6 -1e-6
geometry.prob_hi = 1e-6 1e-6 1e-6

#################################
##### BOUNDARY CONDITIONS #######
#################################
boundary.field_lo = periodic periodic periodic
boundary.field_hi = periodic periodic periodic

#################################
############ NUMERICS ###########
#################################
warpx.verbose = 1
warpx.cfl = 1.0
algo.particle_shape = 1

#################################
############ PLASMA #############
#################################
particles.species_names = photonA photonB electron positron
particles.photon_species = photonA photonB

photonA.species_type = photon
photonA.injection_style = "SingleParticle"
photonA.single_particle_pos = 0 0 0
photonA.single_particle_u = 2.8 0 0
photonA.single_particle_weight = 1e14
photonA.do_not_push = 1

photonB.species_type = photon
photonB.injection_style = "SingleParticle"
photonB.single_particle_pos = 0 0 0
photonB.single_particle_u = -2.8 0 0
photonB.single_particle_weight = 1e14
photonB.do_not_push = 1

electron.species_type = electron
electron.injection_style = none
electron.do_not_push = 1
electron.do_not_deposit = 1

positron.species_type = positron
positron.injection_style = none
positron.do_not_push = 1
positron.do_not_deposit = 1

#################################
############ COLLISION ##########
#################################
collisions.collision_names = lbw # linear Breit-Wheeler
lbw.species = photonA photonB
lbw.product_species = electron positron
lbw.type = photonphoton
lbw.fusion_multiplier = 1.
lbw.fusion_probability_threshold = 0.5
lbw.fusion_probability_target_values = 0.02

# Full diagnostics
diagnostics.diags_names = diag1
diag1.intervals = 1
diag1.diag_type = Full
diag1.fields_to_plot = rho rho_electron rho_positron
diag1.write_species = 1
diag1.species = photonA photonB electron positron

my_constants.out_freq_red = 1
# Reduced diagnostics
warpx.reduced_diags_names = FieldEnergy FieldMomentum FieldMaximum ParticleExtrema_photonA ParticleExtrema_photonB ParticleExtrema_electron ParticleExtrema_positron ParticleEnergy ParticleMomentum RhoMaximum ParticleNumber

FieldEnergy.type = FieldEnergy
FieldEnergy.intervals = out_freq_red

FieldMomentum.type = FieldMomentum
FieldMomentum.intervals = out_freq_red

FieldMaximum.type = FieldMaximum
FieldMaximum.intervals = out_freq_red

ParticleExtrema_photonA.type = ParticleExtrema
ParticleExtrema_photonA.intervals = out_freq_red
ParticleExtrema_photonA.species = photonA

ParticleExtrema_photonB.type = ParticleExtrema
ParticleExtrema_photonB.intervals = out_freq_red
ParticleExtrema_photonB.species = photonB

ParticleExtrema_electron.type = ParticleExtrema
ParticleExtrema_electron.intervals = out_freq_red
ParticleExtrema_electron.species = electron

ParticleExtrema_positron.type = ParticleExtrema
ParticleExtrema_positron.intervals = out_freq_red
ParticleExtrema_positron.species = positron

ParticleEnergy.type = ParticleEnergy
ParticleEnergy.intervals = out_freq_red

ParticleMomentum.type = ParticleMomentum
ParticleMomentum.intervals = out_freq_red

RhoMaximum.type = RhoMaximum
RhoMaximum.intervals = out_freq_red

ParticleNumber.type = ParticleNumber
ParticleNumber.intervals = out_freq_red
