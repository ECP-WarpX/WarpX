#################################
# Domain, Resolution & Numerics
#

# time-scale 
stop_time = 0.016e-12            # [s]

#Normal Resolution, cell size = lambda/16
# quick tests at ultra-low res. (CI)
amr.n_cell = 320 192

# simulation box, no MR
#   note: increase z (space & cells) for converging ion energy
amr.max_level = 0
geometry.prob_lo = -2e-6 -.4e-6            # [m]
geometry.prob_hi = 2e-6 2e-6

# Boundary condition
boundary.field_lo = absorbing_silver_mueller absorbing_silver_mueller
boundary.field_hi = absorbing_silver_mueller absorbing_silver_mueller

# Order of particle shape factors
algo.particle_shape = 1

# numerical tuning
warpx.cfl = 0.999
warpx.use_filter = 1          # bilinear current/charge filter

# field solver yee (default) ckc psatd (fft)
algo.maxwell_solver = yee

#################################
## Performance Tuning
## load balancing
##   The grid & block parameters above are needed for load balancing:
##   an average of ~10 grids per MPI rank (and device) are a good granularity
##   to allow efficient load-balancing as the simulation evolves
algo.load_balance_intervals = 10
algo.load_balance_costs_update = Heuristic

##################################
## Embeded Boundary

my_constants.sheetRadius    = 6.25e-9      # [m] 1/2 cell
my_constants.slitWidth = 0.3e-6       # [m] width of slit = lambda * 2
warpx.eb_implicit_function = "(
    if(abs(z)<=sheetRadius and abs(x)>=(slitWidth/2.0), 1.0, -1.0) )"
#################################
## Laser Pulse Profile
##
lasers.names        = laser1
laser1.position     = 0. 0. -.35e-6     # point the laser plane (antenna)
laser1.direction    = 0. 0. 1.          # the plane's (antenna's) normal direction
laser1.polarization = 1. 0. 0.          # the main polarization vector
laser1.a0           = 0.001             # maximum amplitude of the laser field [V/m]
laser1.wavelength   = .2e-6              # central wavelength of the laser pulse [m]
laser1.profile      = Gaussian
laser1.profile_waist = 2.2e-5            # beam waist (E(w_0)=E_0/e) [m]
laser1.profile_duration = 5.e-15       # pulse length (E(tau)=E_0/e; tau=tau_E=FWHM_I/1.17741) [s]
laser1.profile_t_peak = 5.e-15         # time until peak intensity reached at the laser plane [s]
laser1.profile_focal_distance = .35e-6  # focal distance from the antenna [m]

#################################
## Diagnostics
##
diagnostics.diags_names = diag1 
diag1.intervals = 100
diag1.diag_type = Full
diag1.format = openpmd
diag1.fields_to_plot = Ex Ey Ez Bx By Bz jx jz
diag1.write_species = 0

#################################
## Reduced Diagnostics
##
#
warpx.reduced_diags_names                   = FP_line
FP_line.type = FieldProbe
FP_line.intervals = 100
FP_line.integrate = 1
FP_line.probe_geometry = 1
FP_line.x_probe = -1.5e-6
FP_line.y_probe = 0.
FP_line.z_probe = 1.7e-6
FP_line.x1_probe = 1.5e-6
FP_line.y1_probe = 0.
FP_line.z1_probe = 1.7e-6
FP_line.resolution = 201

authors = "Axel Huebl <axelhuebl@lbl.gov>"

